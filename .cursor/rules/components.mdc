---
description: Component and animation rules
globs: ["src/components/**/*", "src/app/**/*.tsx"]
---

# Component & Animation Rules

## üî¥ Use Existing Components

Before creating new components, check these exist:

| Component | Usage |
|-----------|-------|
| `MainCard` | Card container with optional gold bar |
| `SummaryRow` | Label-value display |
| `PrimaryButton` | Gold CTA buttons |
| `SecondaryButton` | Neutral buttons |
| `Button` | Unified button (variant prop) |
| `FormInput` | Styled inputs |
| `PageLayout` | Page container |
| `ProgressSteps` | Booking progress |
| `BlockingLoginModal` | Auth modal |

## Card Standards

```typescript
// Every card must follow this pattern
<div 
  className="rounded-2xl bg-white"
  style={{
    borderWidth: 1,
    borderColor: themeVars.cardBorder,
    boxShadow: '0 4px 20px rgba(0,0,0,0.08)',
  }}
>
```

## Max Width Constraint

```typescript
// All content containers
<div className="mx-auto max-w-[430px] w-full px-4">
```

## üî¥ STRICT Animation Preservation

Animations are brand identity. NEVER remove or simplify.

### Framer Motion vs CSS Transitions

The codebase uses both Framer Motion and inline CSS transitions:

- **Framer Motion:** Used for complex animations (confirm page confetti, sparkles, keyframe animations)
- **CSS Transitions:** Used for simpler mount/hover animations (page loads, button interactions)

**Rule:** If a component already uses Framer Motion, continue using it. Do not replace Framer Motion with CSS transitions, and do not mix both animation systems in the same component.

### Page Load Pattern

```typescript
const [mounted, setMounted] = useState(false);
useEffect(() => { setMounted(true); }, []);

// Fade + slide up
style={{
  opacity: mounted ? 1 : 0,
  transform: mounted ? 'translateY(0)' : 'translateY(10px)',
  transition: 'opacity 300ms ease-out, transform 300ms ease-out',
}}

// With delay (stagger)
style={{
  opacity: mounted ? 1 : 0,
  transform: mounted ? 'translateY(0)' : 'translateY(10px)',
  transition: 'opacity 300ms ease-out 100ms, transform 300ms ease-out 100ms',
}}
```

### Stagger Pattern for Lists

```typescript
{items.map((item, index) => (
  <div
    key={item.id}
    style={{
      opacity: mounted ? 1 : 0,
      transform: mounted ? 'translateY(0)' : 'translateY(15px)',
      transition: `opacity 300ms ease-out ${200 + index * 50}ms, transform 300ms ease-out ${200 + index * 50}ms`,
    }}
  >
))}
```

### Button Micro-interactions

```typescript
// Primary button
className="transition-all duration-200 hover:scale-[1.02] active:scale-[0.97]"

// Secondary button
className="transition-all duration-200 hover:scale-[1.01] active:scale-[0.98]"
```

### Selection States

```typescript
style={{
  transform: isSelected ? 'scale(1.02)' : undefined,
  background: isSelected
    ? `linear-gradient(to bottom right, color-mix(in srgb, ${themeVars.primary} 20%, transparent), ...)`
    : 'white',
  outline: isSelected ? `2px solid ${themeVars.primary}` : undefined,
  transition: 'all 300ms ease-out',
}}
```

## Standard Timing

| Animation | Duration | Easing |
|-----------|----------|--------|
| Page transitions | 300ms | ease-out |
| Card selection | 200-300ms | ease-out |
| Button hover | 200ms | ease-out |
| Success checkmark | 500ms | custom |
| Confetti | 2500ms | ease-out |

## ‚ùå Never Do This

```typescript
// ‚ùå Removing animation
// "I simplified this for performance"

// ‚ùå Changing timing
// "I shortened this to 100ms"

// ‚ùå Removing confetti/sparkles
// "These seemed unnecessary"
```
